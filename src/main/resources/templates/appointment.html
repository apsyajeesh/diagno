<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
<div th:fragment="content">
<div class="card shadow-lg">
     <div class="card-body p-5">
         <div th:if="${param.success}">
             <div class="alert alert-info">
                 Successfully scheduled an appointment
             </div>
         </div>
         <form method="POST"
               class="needs-validation"
               novalidate=""
               autocomplete="off"
               th:action="@{/appointment/save}"
               th:object="${appointment}">

             <div class="mb-3">
                 <p>Enter appointment details to schedule one!</p>
             </div>

             <div class="mb-3">
                 <input id="patient_name" type="text" class="form-control" name="patient_name" value="" required autofocus placeholder="Patient Name"  th:field="*{patientName}"/>
                 <div class="invalid-feedback">
                     Full Name is required
                 </div>
             </div>

             <div class="mb-3">
                 <select class="form-select" id="location" name="location" required th:field="*{location}">
                     <option value="" selected>Select Location</option>
                     <option value="Los Angeles">Los Angeles</option>
                     <option value="Simi Valley">Simi Valley</option>
                     <option value="Irvine">Irvine</option>
                     <option value="Santa Monica">Santa Monica</option>
                 </select>
                 <div class="invalid-feedback">
                     Lab location is required
                 </div>
             </div>

             <div class="mb-3">
                 <select class="form-select" id="test_name" name="test_name" required th:field="*{testName}">
                     <option value="" selected>Select Your Test</option>
                     <option value="covid19">COVID-19 Test</option>
                     <option value="glucose">Glucose</option>
                     <option value="TB.Test">TB Test (Tuberculosis)</option>
                     <option value="other">All Other Tests</option>
                 </select>
                 <div class="invalid-feedback">
                     Test Selection is required
                 </div>
             </div>

             <div class="mb-3">
                 <input id="startDate" class="form-control" type="date" th:attr="placeholder=${'Select Appointment Date'}" th:field="*{appointmentDate}" />
                 <div id="appointmentsContainer" class="mt-4"></div>
             </div>
             <input type="hidden" id="appointmentTime" name="appointmentTime" th:value="${selectedTimeInput}" />
             <div class="align-items-center d-flex">
                 <button type="submit" class="btn btn-primary ms-auto">
                     Book Now
                 </button>
             </div>
         </form>
     </div>
 </div>
</div>
</body>
</html>